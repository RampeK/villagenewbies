public partial class DatabaseAccess
{
    public async Task PoistaAlueTietokannasta(int alue_id)
    {


        string projectDirectory = System.AppDomain.CurrentDomain.BaseDirectory;
        var projectRoot = Path.GetFullPath(Path.Combine(projectDirectory, @"..\..\..\..\..\"));

        DotNetEnv.Env.Load(projectRoot);
        var env = Environment.GetEnvironmentVariables();

        string connectionString = $"server={env["SERVER"]};port={env["SERVER_PORT"]};database={env["SERVER_DATABASE"]};user={env["SERVER_USER"]};password={env["SERVER_PASSWORD"]}";
        using (var connection = new MySqlConnection(connectionString))
        {
            try
            {
                await connection.OpenAsync();

                var query = "DELETE FROM alue WHERE id = @Alue_id";

                using (var command = new MySqlCommand(query, connection))
                {
				  command.Parameters.AddWithValue(@Alue_id,alue_id);
				  var result = await command.ExecuteNonQueryAsync():
				  return result > 0; // palauttaa true jos yksi tai usempi rivi poistettiin
				
				}
				
                  


            }
            catch (Exception ex)
            {
                // Käsittely mahdollisille poikkeuksille
                Debug.WriteLine(ex.Message);
				return false;
            }
        }
    }



}



public partial class DeleteAreaPage : ContentPage
{
    public ObservableCollection<Alue> Alueet { get; private set; }

    public DeleteAreaPage()
    {
        InitializeComponent();
        Alueet = new ObservableCollection<Alue>();
        // Täytä Alueet-kokoelma
        AreasCollectionView.ItemsSource = Alueet;
    }

    private async void PoistaAlue_Clicked(object sender, EventArgs e)
    {
        if (!(sender is Button button)) return;
        if (!(button.CommandParameter is Alue alue)) return;

        bool confirm = await DisplayAlert("Vahvistus", $"Haluatko varmasti poistaa alueen: {alue.Nimi}?", "Kyllä", "Ei");
        if (!confirm) return;

        // Toteuta tietokannasta poistaminen tässä. Oletetaan, että DatabaseAccess-luokallasi on metodi, joka hoitaa tämän.
        var success = await databaseAccess.PoistaAlueTietokannasta(alue.Id);
        if (success)
        {
            Alueet.Remove(alue);
        }
        else
        {
            await DisplayAlert("Virhe", "Alueen poistaminen epäonnistui.", "OK");
        }
    }

    // ... muu koodi ...
}


    
